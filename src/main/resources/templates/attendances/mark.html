<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отметить посещаемость - Журнал</title>
    <link th:replace="~{fragments :: styles}">
</head>
<body>
<div th:replace="~{fragments :: header}"></div>
<div th:replace="~{fragments :: nav}"></div>

<div class="container">
    <div class="content">
        <h1>Отметить посещаемость</h1>
        <p class="attendance-info">
            Предмет: <strong th:text="${subject.name}"></strong><br>
            Дата: <strong th:text="${#temporals.format(date, 'dd.MM.yyyy')}"></strong>
        </p>

        <form action="/attendances/mark" method="post" class="attendance-form">
            <input type="hidden" name="subjectId" th:value="${subject.id}">

            <div class="form-controls">
                <label>
                    <input type="date" name="date" th:value="${#temporals.format(date, 'yyyy-MM-dd')}"
                           onchange="this.form.submit()" class="date-input">
                    Изменить дату
                </label>

                <label>
                    <select name="subjectId" onchange="this.form.submit()">
                        <option th:each="s : ${subjects}"
                                th:value="${s.id}"
                                th:text="${s.name}"
                                th:selected="${s.id == subject.id}"></option>
                    </select>
                    Изменить предмет
                </label>
            </div>

            <table>
                <thead>
                <tr>
                    <th>Студент</th>
                    <th>Группа</th>
                    <th>Присутствовал</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="student : ${students}">
                    <td th:text="${student.fullName}"></td>
                    <td th:text="${student.groupName}"></td>
                    <td>
                        <input type="checkbox"
                               name="presentStudents"
                               th:value="${student.id}">
                    </td>
                </tr>
                </tbody>
            </table>


            <div class="actions">
                <button type="submit" class="btn btn-success">Сохранить посещаемость</button>
                <a href="/attendances" class="btn">Отмена</a>
            </div>
        </form>

        <script th:src="@{/js/attendance.js}"></script>
    </div>
</div>
</body>
</html>
